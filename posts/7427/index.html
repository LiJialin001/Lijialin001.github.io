<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>微机原理总结 | Wonderland</title><meta name="keywords" content="Code"><meta name="author" content="A.S.,lijialin_3737@icloud.com"><meta name="copyright" content="A.S."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="8086寄存器结构通用寄存器组   AH AL AX 累加器    BH BL BX 基数   CH CL CX 计数   DH DL DX 数据      SP 堆栈指针    BP 基址指针   SI 源变址   DI 目的变址   其他   IP  指令指针    FH FL 状态标志      CS 代码段寄存器    DS 数据段寄存器   SS 堆栈段寄存器   ES 附加段寄存器">
<meta property="og:type" content="article">
<meta property="og:title" content="微机原理总结">
<meta property="og:url" content="http://wonderland.plus/posts/7427/index.html">
<meta property="og:site_name" content="Wonderland">
<meta property="og:description" content="8086寄存器结构通用寄存器组   AH AL AX 累加器    BH BL BX 基数   CH CL CX 计数   DH DL DX 数据      SP 堆栈指针    BP 基址指针   SI 源变址   DI 目的变址   其他   IP  指令指针    FH FL 状态标志      CS 代码段寄存器    DS 数据段寄存器   SS 堆栈段寄存器   ES 附加段寄存器">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png">
<meta property="article:published_time" content="2022-11-17T11:15:11.903Z">
<meta property="article:modified_time" content="2022-11-23T12:29:37.997Z">
<meta property="article:author" content="A.S.">
<meta property="article:tag" content="Code">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png"><link rel="shortcut icon" href="/img/wonderland.png"><link rel="canonical" href="http://wonderland.plus/posts/7427/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6bc38426f6cfe5b7568b2279783c094c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: A.S.","link":"链接: ","source":"来源: Wonderland","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微机原理总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-23 20:29:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Wonderland" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/face.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/List/"><i class="fa-fw fas fa-circle-check"></i><span> ToDo</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Wonderland</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/List/"><i class="fa-fw fas fa-circle-check"></i><span> ToDo</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">微机原理总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-17T11:15:11.903Z" title="发表于 2022-11-17 19:15:11">2022-11-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-23T12:29:37.997Z" title="更新于 2022-11-23 20:29:37">2022-11-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%B8%87%E6%81%B6%E7%9A%84%E6%9C%9F%E6%9C%AB%E8%80%83/">万恶的期末考</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>27分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="微机原理总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/7427/#post-comment"><span class="gitalk-comment-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="8086寄存器结构"><a href="#8086寄存器结构" class="headerlink" title="8086寄存器结构"></a>8086寄存器结构</h1><h2 id="通用寄存器组"><a href="#通用寄存器组" class="headerlink" title="通用寄存器组"></a>通用寄存器组</h2><table>
<thead>
<tr>
<th align="center">AH</th>
<th align="center">AL</th>
<th align="center">AX</th>
<th align="center">累加器</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BH</td>
<td align="center">BL</td>
<td align="center">BX</td>
<td align="center">基数</td>
</tr>
<tr>
<td align="center">CH</td>
<td align="center">CL</td>
<td align="center">CX</td>
<td align="center">计数</td>
</tr>
<tr>
<td align="center">DH</td>
<td align="center">DL</td>
<td align="center">DX</td>
<td align="center">数据</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">SP</th>
<th align="center">堆栈指针</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BP</td>
<td align="center">基址指针</td>
</tr>
<tr>
<td align="center">SI</td>
<td align="center">源变址</td>
</tr>
<tr>
<td align="center">DI</td>
<td align="center">目的变址</td>
</tr>
</tbody></table>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><table>
<thead>
<tr>
<th align="center">IP</th>
<th align="center"></th>
<th align="center">指令指针</th>
</tr>
</thead>
<tbody><tr>
<td align="center">FH</td>
<td align="center">FL</td>
<td align="center">状态标志</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">CS</th>
<th align="center">代码段寄存器</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DS</td>
<td align="center">数据段寄存器</td>
</tr>
<tr>
<td align="center">SS</td>
<td align="center">堆栈段寄存器</td>
</tr>
<tr>
<td align="center">ES</td>
<td align="center">附加段寄存器</td>
</tr>
</tbody></table>
<h1 id="汇编指令"><a href="#汇编指令" class="headerlink" title="汇编指令"></a>汇编指令</h1><h2 id="一些默认"><a href="#一些默认" class="headerlink" title="一些默认"></a>一些默认</h2><ul>
<li>执行指令后，dst中存放运算结果</li>
<li>一个单元（nn）给字时，为nn和nn+1</li>
</ul>
<h2 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h2><p><strong>寻得操作数来源</strong></p>
<ol>
<li><p>固定寻址</p>
<p>操作数地址被隐含于操作码中，无需计算EA</p>
</li>
<li><p>立即数寻址</p>
<p>操作数直接放在指令字段中，执行时直接从此读取</p>
<blockquote>
<p>显然，由于其无法存放运算结果，故只能作为原操作数使用</p>
</blockquote>
</li>
<li><p>寄存器寻址</p>
<p>使用CPU内部寄存器中数据作为操作数</p>
<p>CPU内部执行，无需总线周期</p>
</li>
<li><p>存储器寻址</p>
<p>一般位于DS、SS、ES中，需EU计算出EA，再由BIU计算出PA，通过PA取得操作数</p>
<p>src和dst只能有一个为存储器操作数</p>
<ul>
<li><p>直接寻址</p>
<p>直接给出EA(nn)</p>
<p>?S: [nn]</p>
<p>段首址缺省值DS</p>
</li>
<li><p>寄存器间接寻址</p>
<p>EA于寄存器(BX\SI\DI\BP)中，其中BX、SI、DI段首址缺省DS，BP缺省SS</p>
</li>
<li><p>寄存器相对寻址</p>
<p>加上偏移量</p>
<p>AREA[SI] </p>
<p>缺省同上</p>
</li>
<li><p>基址变址寻址</p>
<p>基址加上变址，缺省同上</p>
</li>
<li><p>相对基址加变址寻址</p>
<p>超级加倍</p>
</li>
<li><p>串寻址</p>
<p>隐含使用SI(指向源串首字)、DI</p>
<p>SB或SW(字串)</p>
</li>
<li><p>32为寻址</p>
<p>变址乘了一个比例系数，其他不变，寄存器名称变(前面加个E)</p>
</li>
</ul>
</li>
<li><p>I&#x2F;O端口寻址</p>
<ul>
<li><p>直接端口寻址</p>
<p>端口数0～255</p>
</li>
<li><p>寄存器间接端口寻址</p>
<p>端口数大于255的，放在一寄存器中转借一下</p>
</li>
</ul>
</li>
</ol>
<h2 id="8086指令系统"><a href="#8086指令系统" class="headerlink" title="8086指令系统"></a>8086指令系统</h2><table>
<thead>
<tr>
<th>im</th>
<th>立即数</th>
</tr>
</thead>
<tbody><tr>
<td>reg</td>
<td>寄存器</td>
</tr>
<tr>
<td>seg</td>
<td>段寄存器</td>
</tr>
<tr>
<td>m</td>
<td>存储单元</td>
</tr>
</tbody></table>
<p><em>CS、IP两个寄存器不做dst</em></p>
<h3 id="Data-Transfer"><a href="#Data-Transfer" class="headerlink" title="Data Transfer"></a>Data Transfer</h3><p><strong>通用传输</strong></p>
<table>
<thead>
<tr>
<th align="left">MOV</th>
<th align="center">im到seg、seg到seg、m到m🙅</th>
</tr>
</thead>
<tbody><tr>
<td align="left">XCHG</td>
<td align="center">交换两操作数内容，im、seg🙅，必有一个reg</td>
</tr>
<tr>
<td align="left">PUSH</td>
<td align="center">用于程序保护，不对字节操作（对字，高位先入</td>
</tr>
<tr>
<td align="left">POP</td>
<td align="center">用于恢复数据，同上（SP自动加2</td>
</tr>
</tbody></table>
<p><strong>累加器专用</strong></p>
<table>
<thead>
<tr>
<th>IN</th>
<th align="center">只能用于AX&#x2F;AL，tx</th>
</tr>
</thead>
<tbody><tr>
<td>OUT</td>
<td align="center">中间寄存器只能使用DX，ts</td>
</tr>
<tr>
<td>XLAT</td>
<td align="center">（BX+AL）➡️ AL，可用于查表</td>
</tr>
</tbody></table>
<p><strong>地址-目标传送</strong></p>
<table>
<thead>
<tr>
<th>LEA  reg  src</th>
<th align="center">src的EA ➡️ reg</th>
</tr>
</thead>
<tbody><tr>
<td>LDS  reg  src</td>
<td align="center">src的(EA+2) ➡️ DS、src的EA ➡️ reg</td>
</tr>
<tr>
<td>LES</td>
<td align="center">与LDS类似</td>
</tr>
</tbody></table>
<p><strong>标志寄存器传送</strong></p>
<table>
<thead>
<tr>
<th>LAHF</th>
<th align="center">Load AH from Flags, 标志位第八位读到AH</th>
</tr>
</thead>
<tbody><tr>
<td>SAHF</td>
<td align="center">与上反</td>
</tr>
<tr>
<td>PUSHF</td>
<td align="center">标志寄存器入栈</td>
</tr>
<tr>
<td>POPF</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="Arithmetic"><a href="#Arithmetic" class="headerlink" title="Arithmetic"></a>Arithmetic</h3><p>scr和dst必须有一个为reg（scr为im的情况除外</p>
<p>8位无符号数 0～255（FFH（显然16位到FFFF H</p>
<p>显然8位有符号数（80H～7FH即 -128～ +127）、16位 8000H ～ 7FFFH</p>
<blockquote>
<p>加减法两个操作数必同为无符号OR有符号</p>
</blockquote>
<p>组合BCD：一字节两位                非组合BCD：一字节第四位表示一位</p>
<p>除INC指令不影响CF外，其余均影响CF、OF等六个标志位</p>
<p>调整指令要求操作数为 B， 其他B、W均可</p>
<p><strong>标志位变化</strong></p>
<table>
<thead>
<tr>
<th>CF</th>
<th align="center">无符号溢出</th>
<th>OF</th>
<th align="center">有符号溢出❌</th>
<th>ZF</th>
<th align="center">运算结果为0时置1</th>
</tr>
</thead>
<tbody><tr>
<td>SF</td>
<td align="center">运算结果为负置1</td>
<td>PF</td>
<td align="center">运算结果有偶数个1，置1</td>
<td>AF</td>
<td align="center">操作数为BCD，半字节进位，置1</td>
</tr>
</tbody></table>
<p><strong>加法</strong></p>
<table>
<thead>
<tr>
<th>ADD</th>
<th align="center">双精度字先低位ADD，后高位ADC</th>
</tr>
</thead>
<tbody><tr>
<td>ADC</td>
<td align="center">带进位，加上CF</td>
</tr>
<tr>
<td>INC</td>
<td align="center">修改指针OR循环计数（不修改CF故不用于控制循环结束</td>
</tr>
<tr>
<td>AAA</td>
<td align="center">对非组合BCD调整，结果分为AH、AL存入AX</td>
</tr>
<tr>
<td>DAA</td>
<td align="center">组合BCD十进制调整，若超范围则加6调整，默认在AL中进行</td>
</tr>
</tbody></table>
<p><strong>减法</strong></p>
<table>
<thead>
<tr>
<th>SUB</th>
<th align="center">无借位</th>
</tr>
</thead>
<tbody><tr>
<td>SBB</td>
<td align="center">将低位借的CF减去</td>
</tr>
<tr>
<td>DEC</td>
<td align="center">同INC对CF无影响</td>
</tr>
<tr>
<td>NEG</td>
<td align="center">求补码（0-src）➡️ src 即 （FFH - src）➡️ src，显然src不为0时使CF &#x3D; 1</td>
</tr>
<tr>
<td>CMP</td>
<td align="center">相减，但结果不送dst，只更改标志位</td>
</tr>
<tr>
<td>AAS</td>
<td align="center">非组合十进制调整，-6</td>
</tr>
<tr>
<td>DAS</td>
<td align="center">组合十进制调整</td>
</tr>
</tbody></table>
<p><strong>乘法</strong></p>
<table>
<thead>
<tr>
<th>MUL  src(B or W)</th>
<th align="center">AL*src ➡️ AX 或  AX *src ➡️ DX,AX，无符号</th>
</tr>
</thead>
<tbody><tr>
<td>IMUL src</td>
<td align="center">同上，有符号</td>
</tr>
<tr>
<td>AAM</td>
<td align="center">非组合十进制调整，组合无法调整</td>
</tr>
</tbody></table>
<p><strong>除法</strong></p>
<table>
<thead>
<tr>
<th>DIV   src</th>
<th align="center">AX&#x2F;src ➡️ AL   DX,AX&#x2F;src ➡️ AX  余数➡️AH 或 DX</th>
</tr>
</thead>
<tbody><tr>
<td>IDIV  src</td>
<td align="center"></td>
</tr>
<tr>
<td>AAD</td>
<td align="center">非组合十进制调整，组合无法调整</td>
</tr>
<tr>
<td>CBW</td>
<td align="center">AL按<strong>符号</strong>拓展为AX, AL&lt;80H➡️AH&#x3D;00H 反之AH&#x3D;FFH</td>
</tr>
<tr>
<td>CWD</td>
<td align="center">AX ➡️ DX,AX，按符号拓展</td>
</tr>
</tbody></table>
<h3 id="Logic-and-Shift"><a href="#Logic-and-Shift" class="headerlink" title="Logic and Shift"></a>Logic and Shift</h3><p>操作数类型均可B 或 W</p>
<p><strong>布尔型指令</strong></p>
<table>
<thead>
<tr>
<th>AND</th>
<th align="center">可用于对指定位屏蔽(清零)</th>
</tr>
</thead>
<tbody><tr>
<td>OR</td>
<td align="center">可用于对特定位置1</td>
</tr>
<tr>
<td>XOR</td>
<td align="center">可通过查看ZF比较操作数是否相同</td>
</tr>
<tr>
<td>TEST</td>
<td align="center">与AND类似，只影响标志位</td>
</tr>
<tr>
<td>NOT</td>
<td align="center">取反码</td>
</tr>
<tr>
<td>技巧</td>
<td align="center">AND AX,AX   OR AX,AX   XOR AX,AX 都可清CF，但XOR同时清AX<br /> TEST AL，01H  可检测AL为奇&#x2F;偶</td>
</tr>
</tbody></table>
<p><strong>移位</strong></p>
<table>
<thead>
<tr>
<th>SHL&#x2F;SAL</th>
<th align="center">低位补0，原高位进CF，高位不等于CF➡️OF&#x3D;1则符号改变</th>
</tr>
</thead>
<tbody><tr>
<td>SHR</td>
<td align="center">高位补0，原低位进CF</td>
</tr>
<tr>
<td>SAR</td>
<td align="center">原高位补高位，低位进CF</td>
</tr>
<tr>
<td>ROL</td>
<td align="center">原高位进CF且补低位</td>
</tr>
<tr>
<td>ROR</td>
<td align="center">原低位进CF且补高位</td>
</tr>
<tr>
<td>RCL</td>
<td align="center">原高位进CF，原CF补低位</td>
</tr>
<tr>
<td>RCR</td>
<td align="center">原低位进CF，原CF补高位</td>
</tr>
<tr>
<td>技巧</td>
<td align="center">循环指令通过每次检测CF可以判断reg&#x2F;meg含1或0的个数</td>
</tr>
</tbody></table>
<h3 id="String-Manipulation"><a href="#String-Manipulation" class="headerlink" title="String Manipulation"></a>String Manipulation</h3><p><strong>串操作使用的寄存器</strong></p>
<table>
<thead>
<tr>
<th>SI</th>
<th align="center">源字符串变址寄存器</th>
</tr>
</thead>
<tbody><tr>
<td>DI</td>
<td align="center">目的字符串变址寄存器</td>
</tr>
<tr>
<td>CX</td>
<td align="center">重复操作次数计数器</td>
</tr>
<tr>
<td>AL&#x2F;AX</td>
<td align="center">SCAS扫描值、LODS的dst、STOS的src</td>
</tr>
<tr>
<td>DF</td>
<td align="center">等于0➡️SI、DI自动加1(2)；等于1 减</td>
</tr>
<tr>
<td>ZF</td>
<td align="center">扫描、比较串操作终止标志</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>MOVS&#x2F;MOVSB&#x2F;MOVSW</th>
<th align="center">串传送，要提前将串的变址以及传送长度存入对应reg</th>
</tr>
</thead>
<tbody><tr>
<td>CMPS&#x2F;CMPSB&#x2F;CMPSW</td>
<td align="center">串比较，根据ZF判断结果(减法)</td>
</tr>
<tr>
<td>SCAS&#x2F;SCASB&#x2F;SCASW</td>
<td align="center">串搜索，在DI所指串中搜索AL(AX)，判断同上</td>
</tr>
<tr>
<td>LODS&#x2F;LODSB&#x2F;LODSW</td>
<td align="center">把SI所指串取到AL(AX)中，显然无法使用重复前缀</td>
</tr>
<tr>
<td>STOS&#x2F;STOSB&#x2F;STOSW</td>
<td align="center">存串指令</td>
</tr>
<tr>
<td>REP&#x2F;REPZ&#x2F;REPE&#x2F;REPNE&#x2F;REPNZ</td>
<td align="center">CX&#x3D;0时退出；REPZ&#x2F;REPE附加ZF条件，等于0提前退出；REPNE&#x2F;REPNZ同理</td>
</tr>
</tbody></table>
<h3 id="Control-Jump"><a href="#Control-Jump" class="headerlink" title="Control Jump"></a>Control Jump</h3><p>原理：改变CS与IP</p>
<p><strong>无条件转移、调用、返回</strong></p>
<p>段内转移，目标为NEAR类，近转移，改IP；    段间转移，目标为FAR类，远转移，改CS和IP</p>
<table>
<thead>
<tr>
<th>JMP</th>
<th align="center">可段内直接寻址(JMP NAME PTR TAGET或JMP SHORT OBJECT)<br />可段内间接寻址(JMP reg或JMP WORD PTR[SI])<br />可段间直接寻址(JMP FAR PTR LABEL, LABEL为转移地址号)<br />可段间间接寻址(JMP DWORD PTR[BX] [SI])</th>
</tr>
</thead>
<tbody><tr>
<td>CALL</td>
<td align="center">调用格式同上<br />多了保存的功能，分四步<br />1⃣️ (SP-2)➡️SP；CS ➡️((SP+1),(SP))<br />2⃣️SEG➡️CS<br />3⃣️(SP-2)➡️SP；IP ➡️((SP+1),(SP))<br />4⃣️dst➡️IP</td>
</tr>
<tr>
<td>RET</td>
<td align="center">恢复栈即SP+4，后面可加立即数加到SP，过程与上面相反</td>
</tr>
</tbody></table>
<p><strong>条件转移指令</strong></p>
<p>JCC Target 若CC成立则跳转到target</p>
<p>无N时J后两字符为或关系，有N后面字符为与关系</p>
<table>
<thead>
<tr>
<th>A</th>
<th>above</th>
</tr>
</thead>
<tbody><tr>
<td>B</td>
<td>below</td>
</tr>
<tr>
<td>C</td>
<td>carry</td>
</tr>
<tr>
<td>E</td>
<td>equal</td>
</tr>
<tr>
<td>Z</td>
<td>zore（ZF）</td>
</tr>
<tr>
<td>G</td>
<td>greater(有符号)</td>
</tr>
<tr>
<td>L</td>
<td>less</td>
</tr>
<tr>
<td>O</td>
<td>overflow(OF)</td>
</tr>
<tr>
<td>P</td>
<td>parity(奇偶位PF)</td>
</tr>
<tr>
<td>CXZ</td>
<td>CX is zero</td>
</tr>
<tr>
<td>s</td>
<td>sign</td>
</tr>
</tbody></table>
<p><strong>循环控制指令</strong></p>
<p>以CX为计数器，CX不等于0时相当于执行(IP+8)➡️IP</p>
<table>
<thead>
<tr>
<th>LOOP</th>
<th align="center">JNZ？？？</th>
</tr>
</thead>
<tbody><tr>
<td>LOOPZ&#x2F;LOOPE</td>
<td align="center">CX&#x3D;0或ZF&#x3D;0均可退出循环</td>
</tr>
<tr>
<td>LOOPNZ&#x2F;LOOPNE</td>
<td align="center">CX&#x3D;0且ZF&#x3D;0退出循环</td>
</tr>
</tbody></table>
<h3 id="Processor-Control"><a href="#Processor-Control" class="headerlink" title="Processor Control"></a>Processor Control</h3><p><strong>状态标志位操作指令</strong></p>
<table>
<thead>
<tr>
<th>CF</th>
<th>进位标志位</th>
<th>DF</th>
<th>方向标志位</th>
<th>IF</th>
<th>中断标志位</th>
</tr>
</thead>
</table>
<table>
<thead>
<tr>
<th>CLC</th>
<th align="center">CF置0</th>
</tr>
</thead>
<tbody><tr>
<td>CMC</td>
<td align="center">CF取反</td>
</tr>
<tr>
<td>STC</td>
<td align="center">CF置1</td>
</tr>
<tr>
<td>CLD    控制串操作执行（方向</td>
<td align="center">DF置0</td>
</tr>
<tr>
<td>STD    同上</td>
<td align="center">DF置1</td>
</tr>
<tr>
<td>CLI      禁止CPU响应</td>
<td align="center">IF置0</td>
</tr>
<tr>
<td>STI      允许</td>
<td align="center">IF置1</td>
</tr>
</tbody></table>
<p><strong>外部同步指令</strong></p>
<table>
<thead>
<tr>
<th>HLF</th>
<th align="center">停机等待外部中断 OR 复位</th>
</tr>
</thead>
<tbody><tr>
<td>WAIT</td>
<td align="center">CPU空转状态等待外部中断，完成后返回空转</td>
</tr>
<tr>
<td>ESC OPC ，src</td>
<td align="center">协处理器相关</td>
</tr>
<tr>
<td>LOCK</td>
<td align="center">总线封锁前缀，使LOCK&#x3D;0</td>
</tr>
</tbody></table>
<p><strong>空操作指令</strong></p>
<table>
<thead>
<tr>
<th>NOP</th>
<th align="center">占3个时钟周期</th>
</tr>
</thead>
</table>
<h3 id="Interrupt"><a href="#Interrupt" class="headerlink" title="Interrupt"></a>Interrupt</h3><p><strong>中断及终端返回指令</strong></p>
<table>
<thead>
<tr>
<th>INT n</th>
<th align="center">n为中断类型号<br />F、CS、IP入栈，TF、IF清0<br />取入口偏移地址存入CS、IP</th>
</tr>
</thead>
<tbody><tr>
<td>IRET</td>
<td align="center">中断返回指令，F、CS、IP出栈</td>
</tr>
</tbody></table>
<p><strong>专用中断</strong></p>
<table>
<thead>
<tr>
<th>0</th>
<th>除数为0时响应</th>
<th>1</th>
<th>单步中断，触发条件TF&#x3D;1</th>
<th>2</th>
<th>紧急非屏蔽中断NMI</th>
<th>3</th>
<th>断点中断，INT指令触发</th>
<th>4</th>
<th>溢出中断，INTO指令触发</th>
</tr>
</thead>
</table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A(.asm源程序)--&gt;B(汇编程序)--&gt;C(.obj/.lst)</span><br></pre></td></tr></table></figure>

<p>使用：<strong>MASM宏汇编</strong></p>
<h1 id="MASM宏汇编语言规范"><a href="#MASM宏汇编语言规范" class="headerlink" title="MASM宏汇编语言规范"></a>MASM宏汇编语言规范</h1><h3 id="分段结构"><a href="#分段结构" class="headerlink" title="分段结构"></a>分段结构</h3><ul>
<li>对应CPU内存分段管理</li>
<li>每段有名字且以伪指令 <strong>SEGMENT</strong> 开始，以 <strong>ENDS</strong> 结束</li>
<li>源程序由若干段组成，以 <strong>END</strong> 结束</li>
</ul>
<h3 id="语句构成"><a href="#语句构成" class="headerlink" title="语句构成"></a>语句构成</h3><p><strong>语句类型</strong></p>
<ul>
<li>指令语句，以助记符为基础</li>
<li>伪指令语句，管理性，不产生机器代码</li>
<li>宏指令语句</li>
</ul>
<p><strong>构成与规范</strong></p>
<ul>
<li><p>名字域：</p>
<ul>
<li>由字母开头，可包含数字和专有字符</li>
<li>指令语句名字后跟冒号，伪指令无</li>
</ul>
</li>
<li><p>操作符域：</p>
<ul>
<li>主要为助记符</li>
</ul>
</li>
<li><p>操作数域：</p>
<ul>
<li><p>逗号分隔</p>
</li>
<li><p>存储器操作数</p>
<ul>
<li>标号：指令语句的名字域，可认为是指令语句的地址</li>
<li>变量：存放在某存储单元的数据，变量符号的地址</li>
</ul>
</li>
<li><p>表达式：由以上以及运算符组合而成</p>
</li>
<li><p>运算符</p>
<ul>
<li><p>算数运算符：完成整数的运算，结果为整数</p>
<table>
<thead>
<tr>
<th>+、-、*、&#x2F;</th>
<th>MOD(求余)、SHL、SHR</th>
</tr>
</thead>
</table>
</li>
<li><p>逻辑运算符</p>
</li>
<li><p>关系运算符</p>
<table>
<thead>
<tr>
<th>EQ</th>
<th>相等</th>
<th>NE</th>
<th>不等</th>
<th>LT</th>
<th>小于</th>
<th>GT</th>
<th>大于</th>
<th>LE</th>
<th>小于等于</th>
<th>GE</th>
<th>大于等于</th>
</tr>
</thead>
</table>
</li>
<li><p>分析运算符</p>
<table>
<thead>
<tr>
<th>SEG</th>
<th>求段基址</th>
<th>OFFEST</th>
<th>求偏移量</th>
<th>TYPE</th>
<th>求变量类型</th>
<th>SIZE</th>
<th>求字节数</th>
<th>LENGTH</th>
<th>求变量长度</th>
</tr>
</thead>
</table>
<p>TYPE类型值</p>
<table>
<thead>
<tr>
<th>1</th>
<th>2</th>
<th>4</th>
<th>-1</th>
<th>-2</th>
</tr>
</thead>
<tbody><tr>
<td>DB</td>
<td>DW</td>
<td>DD</td>
<td>NEAR</td>
<td>FAR</td>
</tr>
</tbody></table>
</li>
<li><p>综合运算符</p>
<p>为存储器地址操作数临时指定一个新属性</p>
<table>
<thead>
<tr>
<th>PTR</th>
<th align="center">将左边类型指定给右边地址</th>
</tr>
</thead>
<tbody><tr>
<td>THIS</td>
<td align="center">类似上；与下一条指令分配的段、偏移、属性相同</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="伪指令"><a href="#伪指令" class="headerlink" title="伪指令"></a>伪指令</h1><h4 id="数据定义"><a href="#数据定义" class="headerlink" title="数据定义"></a>数据定义</h4><p>DB～DD、DQ、DT</p>
<p>重复操作符 DUP  [变量名] DB 100 DUP(?)   ？表示不设初值（随机</p>
<h4 id="符号定义"><a href="#符号定义" class="headerlink" title="符号定义"></a><strong>符号定义</strong></h4><table>
<thead>
<tr>
<th>EQU</th>
<th align="center">类似于C中#define，不允许重复定义</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td align="center">允许重复定义</td>
</tr>
</tbody></table>
<h4 id="段定义"><a href="#段定义" class="headerlink" title="段定义"></a>段定义</h4><p>段名  <strong>SEGMENT</strong>  [定位类型] [组合类型] [‘类别’]</p>
<p>​          段内语句</p>
<p>段名  <strong>ENDS</strong></p>
<ul>
<li>定位类型：起始边界要求 缺省值PARA </li>
<li>组合类型：表示与其他段关系  缺省值NONE</li>
<li>类别：一种名字信息</li>
</ul>
<h4 id="段寻址ASSUME"><a href="#段寻址ASSUME" class="headerlink" title="段寻址ASSUME"></a>段寻址ASSUME</h4><p>用来设定各段名与 段寄存器间关系  格式：<strong>ASSUME</strong> 段寄存器名 :  段名 ， 段寄存器名 :  段名 ……</p>
<p>没有给出初值，需和初始化代码配合使用；CS段首址无需初值，系统自动设置</p>
<h4 id="过程定义-PROC-x2F-ENDP"><a href="#过程定义-PROC-x2F-ENDP" class="headerlink" title="过程定义 PROC&#x2F;ENDP"></a>过程定义 PROC&#x2F;ENDP</h4><p>格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">过程名		PROC		[NEAR]/FAR(属性)</span><br><span class="line">				代码</span><br><span class="line">				RET(应为过程中最后执行的语句)</span><br><span class="line">				代码</span><br><span class="line">过程名		ENDP</span><br></pre></td></tr></table></figure>

<h4 id="程序计数器"><a href="#程序计数器" class="headerlink" title="程序计数器 $"></a>程序计数器 $</h4><p>$的值为程序下一所能分配存储单元的偏移地址</p>
<h4 id="定位伪指令-ORG"><a href="#定位伪指令-ORG" class="headerlink" title="定位伪指令 ORG"></a>定位伪指令 ORG</h4><p>指定下一条语句的 偏移地址</p>
<h4 id="结构伪指令"><a href="#结构伪指令" class="headerlink" title="结构伪指令"></a>结构伪指令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">定义：</span><br><span class="line">结构名		STRUC</span><br><span class="line">				内容</span><br><span class="line">结构名		ENDS</span><br><span class="line"></span><br><span class="line">预置：</span><br><span class="line">结构变量名		结构名	&lt;字段值表&gt;</span><br><span class="line"></span><br><span class="line">引用：</span><br><span class="line">结构变量名.结构字段名</span><br><span class="line">[地址寄存器].结构字段名</span><br></pre></td></tr></table></figure>

<h4 id="记录伪指令"><a href="#记录伪指令" class="headerlink" title="记录伪指令"></a>记录伪指令</h4><p>记录共1～2字节，可为每个字段分配二进制位数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">定义：</span><br><span class="line">记录名		RECORD		&lt;字段名&gt;: 宽度[= 表达式][,...]</span><br><span class="line">预置：</span><br><span class="line">记录变量名		记录名		&lt;字段值表，以B结尾，逗号隔开&gt;</span><br><span class="line">记录运算符：</span><br><span class="line">WIDTH		记录名/记录字段名		；求出记录/记录字段所占位数</span><br><span class="line">MASK		记录字段名					；一个记录字段在记录中占拿几位（以出现1为标记</span><br><span class="line">记录字段名单独出现：代表其移到记录最右端所需位数</span><br><span class="line">MOV		AH，20H	SHL AD		；AH = 20 SHL 1 = 40H</span><br></pre></td></tr></table></figure>

<h4 id="宏相关"><a href="#宏相关" class="headerlink" title="宏相关"></a>宏相关</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">宏定义：</span><br><span class="line">宏指令名		MACRO	&lt;形式参数1&gt;,&lt;形式参数2&gt;,... ；也可不设参数</span><br><span class="line">					语句组</span><br><span class="line">          ENDM</span><br><span class="line">宏调用：</span><br><span class="line">直接当语句用，有参数后面跟参数，逗号隔开</span><br><span class="line">取消：</span><br><span class="line">PURGE		&lt;宏指令名1&gt;，&lt;宏指令名2&gt;，&lt;宏指令名3&gt;，...</span><br></pre></td></tr></table></figure>

<h4 id="系统调用功能"><a href="#系统调用功能" class="headerlink" title="系统调用功能"></a>系统调用功能</h4><p>见PDF</p>
<h1 id="主存储器"><a href="#主存储器" class="headerlink" title="主存储器"></a>主存储器</h1><h2 id="半导体存储器"><a href="#半导体存储器" class="headerlink" title="半导体存储器"></a>半导体存储器</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li><p>按读写功能：RWM、ROM （只写、只读</p>
</li>
<li><p>按存取方式：DAM、SAM、RAM  （直接存取、顺序存取、随机存取</p>
</li>
<li><p>按器件分类：双极性TTL、单极性MOS</p>
<blockquote>
<p>双极性快、功率大、集成度低</p>
<p>单极性相反</p>
</blockquote>
</li>
<li><p>按存储原理：RAM、ROM</p>
<blockquote>
<p>RAM可读可写、断电丢失</p>
<p>ROM正常只读、断电不丢失</p>
</blockquote>
</li>
<li><p>按数据传送方式：并行、串行</p>
</li>
</ul>
<h3 id="性能指标"><a href="#性能指标" class="headerlink" title="性能指标"></a>性能指标</h3><ul>
<li>存储容量</li>
<li>存取时间</li>
<li>功耗</li>
<li>工作电源<ul>
<li>TTL +5V</li>
<li>MOS +3～+18V</li>
</ul>
</li>
</ul>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><ul>
<li>存储体</li>
<li>地址译码器</li>
<li>控制逻辑电路</li>
<li>数据缓冲器</li>
</ul>
<h3 id="高速缓存工作原理"><a href="#高速缓存工作原理" class="headerlink" title="高速缓存工作原理"></a>高速缓存工作原理</h3><ul>
<li>依赖：<ul>
<li>程序访问的局部性</li>
<li>数据相对集中存储</li>
<li>把频繁访问的指令、数据存放在速度非常高 (与CPU速度相当)的SRAM——高速缓存 CACHE中</li>
</ul>
</li>
<li>取指令、数据时先到CACHE中查找，没找到再到RAM找</li>
<li>系统的平均存取速度(加权平均) ≈ Cache存取速度×命中率+RAM存取速度×不命中率 </li>
<li>Cache与内存的空间比一般为1:128。</li>
</ul>
<h3 id="存储器寻址方法"><a href="#存储器寻址方法" class="headerlink" title="存储器寻址方法"></a>存储器寻址方法</h3><p><strong>片选</strong>：根据主存储器 系统对每个存储器芯片的地址范围的分配</p>
<p><strong>字选</strong>：选中存储器芯片片内存储单元，由芯片内地译码电路完成</p>
<h1 id="I-x2F-O接口"><a href="#I-x2F-O接口" class="headerlink" title="I&#x2F;O接口"></a>I&#x2F;O接口</h1><h2 id="I-x2F-O组成"><a href="#I-x2F-O组成" class="headerlink" title="I&#x2F;O组成"></a>I&#x2F;O组成</h2><h4 id="接向CPU"><a href="#接向CPU" class="headerlink" title="接向CPU"></a>接向CPU</h4><ul>
<li><p>总线驱动器：匹配CPU数据总线速度和驱动能力</p>
</li>
<li><p>地址译码器：接收CPU总线信号并译码，对各端口(reg)寻址</p>
</li>
<li><p>控制逻辑：实现CPU对端口读写操作和时序控制</p>
</li>
</ul>
<h4 id="接向外设"><a href="#接向外设" class="headerlink" title="接向外设"></a>接向外设</h4><ul>
<li>缓冲器（数据reg）</li>
<li>控制reg：存放CPU控制命令</li>
<li>状态reg：保存状态以供CPU查询</li>
</ul>
<h2 id="I-x2F-O控制方式"><a href="#I-x2F-O控制方式" class="headerlink" title="I&#x2F;O控制方式"></a>I&#x2F;O控制方式</h2><h4 id="程序控制"><a href="#程序控制" class="headerlink" title="程序控制"></a>程序控制</h4><ul>
<li>无条件传送（同步传送<ul>
<li>条件：外设必须随时准备就绪</li>
</ul>
</li>
<li>条件传送（查询传送<ul>
<li>先查询外设工作状态，在外设就绪后进行数据输入、输出</li>
</ul>
</li>
</ul>
<h4 id="DMA控制"><a href="#DMA控制" class="headerlink" title="DMA控制"></a>DMA控制</h4><h1 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h1><p><strong>三大用途</strong>：分时操作、实时处理、故障处理</p>
<h4 id="可屏蔽中断（IF-x3D-0时屏蔽"><a href="#可屏蔽中断（IF-x3D-0时屏蔽" class="headerlink" title="可屏蔽中断（IF&#x3D;0时屏蔽"></a>可屏蔽中断（IF&#x3D;0时屏蔽</h4><p>使IF&#x3D;0情况：</p>
<ul>
<li><p>关中断、禁止中断、中断屏蔽</p>
</li>
<li><p>系统复位，使<strong>IF</strong>&#x3D;<strong>0</strong> </p>
</li>
<li><p>任何一个中断被响应，使<strong>IF</strong>&#x3D;<strong>0</strong> </p>
</li>
<li><p>执行指令<strong>CLI</strong>，使<strong>IF</strong>&#x3D;<strong>0</strong></p>
</li>
</ul>
<p>使IF&#x3D;1情况：</p>
<ul>
<li>开中断、允许中断、中断开放 </li>
<li>执行指令<strong>STI</strong>，使<strong>IF</strong>&#x3D;<strong>1</strong></li>
</ul>
<p><strong>中断向量在中断向量表中的位置称为中断向量地址；</strong></p>
<p><strong>中断向量地址&#x3D;中断类型号×4</strong></p>
<p>中断子程序使用<strong>IRET</strong>指令返回</p>
<h1 id="8259A芯片"><a href="#8259A芯片" class="headerlink" title="8259A芯片"></a>8259A芯片</h1><h2 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h2><ul>
<li>中断请求寄存器<strong>IRR(8</strong>位)<ul>
<li>保存<strong>8</strong>条外界中断请求信号<strong>IR0</strong>~<strong>IR7</strong>的请求状态</li>
<li><strong>Di</strong>位为<strong>1</strong>表示<strong>IRi</strong>引脚有中断请求</li>
</ul>
</li>
<li>中断服务寄存器<strong>ISR</strong>(<strong>8</strong>位)<ul>
<li>保存正在被<strong>8259A</strong>服务着的中断状态</li>
<li><strong>Di</strong>位为<strong>1</strong>表示<strong>IRi</strong>中断正在服务中;为<strong>0</strong>表示没有被服务(处理完毕)</li>
</ul>
</li>
<li>中断屏蔽寄存器<strong>IMR</strong>(<strong>8</strong>位)<ul>
<li>保存<strong>CPU</strong>送来的对中断请求信号<strong>IR</strong>的屏蔽状态</li>
<li><strong>Di</strong>位为<strong>1</strong>表示<strong>IRi</strong>中断被屏蔽(禁止)</li>
</ul>
</li>
</ul>
<h2 id="优先级分析器PR"><a href="#优先级分析器PR" class="headerlink" title="优先级分析器PR"></a>优先级分析器<strong>PR</strong></h2><ul>
<li>定义和修改<strong>IR0-IR7</strong>的优先级别 (通常<strong>IR0</strong>为高，<strong>IR7</strong>为最低)</li>
<li>同时出现几个中断请求时，根据 优先级别决定处理哪一个</li>
<li>处理中断嵌套</li>
</ul>
<h2 id="工作过程"><a href="#工作过程" class="headerlink" title="工作过程"></a>工作过程</h2><ol>
<li><p>执行一段<strong>CPU</strong>的初始化程序， 向<strong>8259</strong>写命令字，规定<strong>8259</strong>的工作状态（初始化</p>
</li>
<li><p>中断源通过<strong>IR0</strong>~<strong>IR7</strong>向<strong>8259A</strong>发中断请求，<strong>8259A</strong>中断请求寄存器<strong>IRR</strong>的相应位置<strong>1</strong></p>
</li>
<li><p><strong>IRR</strong>中经中断屏蔽寄存器<strong>IMR</strong>允许后的置位 进入优先权判别器<strong>PR</strong></p>
<p><strong>PR</strong>将其中最高优先权的中断请求经控制逻辑向<strong>CPU</strong>发<strong>INT</strong>(高电平)请求</p>
</li>
<li><p>若 <strong>CPU</strong> 处于开中断状态 (<strong>IF&#x3D;1</strong>)，在当前指令执行结束后，启动中断响应总线操作（发出两个负脉冲作为响应信号）</p>
</li>
<li><p><strong>8259A</strong>接收到第一个负脉冲</p>
<ul>
<li>使<strong>ISR</strong>相应位置<strong>1</strong>，表示<strong>CPU</strong>已为该中断请求服务</li>
<li>使<strong>IRR</strong>的相应位清<strong>0</strong>(防止一次申请的重复处理)</li>
</ul>
</li>
<li><p><strong>8259A</strong>接收到第二个负脉冲</p>
<ul>
<li><p>将中断类型号送上数据总线（中断类型号由用户编程和中断请求引脚<strong>IRi</strong>的序号<strong>i</strong>共同决定）</p>
</li>
<li><p><strong>CPU</strong>读取中断类型号（经响应过程后）进入中断服务程序，直到服务结束返回。</p>
</li>
<li><p><strong>CPU</strong>向<strong>8259A</strong>送中断结束命令作为中断结束标志</p>
</li>
</ul>
</li>
<li><p>若工作在<strong>AEOI</strong>方式：在第<strong>2</strong>个<strong>INTA#<strong>结束时使</strong>ISRi</strong>复位;    否则由<strong>CPU</strong>发出<strong>EOI</strong>命令使<strong>ISR</strong> <strong>i</strong>复位</p>
</li>
</ol>
<h2 id="工作方式（5方面）"><a href="#工作方式（5方面）" class="headerlink" title="工作方式（5方面）"></a>工作方式（5方面）</h2><ul>
<li>中断优先方式与中断嵌套（各两种</li>
<li>中断结束处理方式 （三种EOI命令</li>
<li>屏蔽中断源的方式 （两种</li>
<li>中断触发方式（两种</li>
<li>级联工作方式</li>
</ul>
<p>通过初始化命令字 (<strong>ICW1</strong><del><strong>ICW4</strong>) 和操作命令字 (<strong>OCW1</strong></del><strong>OCW4</strong>) 设置</p>
<h3 id="中断优先方式与中断嵌套"><a href="#中断优先方式与中断嵌套" class="headerlink" title="中断优先方式与中断嵌套"></a>中断优先方式与中断嵌套</h3><ul>
<li>中断优先方式<ul>
<li>固定优先级<ul>
<li>所有中断请求<strong>IRi</strong>的中断优先级固定不变</li>
<li>优先级排列顺序可编程改变</li>
<li>默认优先级顺序从高到低为<strong>IR0~IR7</strong></li>
</ul>
</li>
<li>循环优先级方式<ul>
<li>自动中断优先级循环，初始优先级顺序可用编程改变</li>
<li>中断请求<strong>IRi</strong>被处理后，其优先级别自动降为最低， 原来比它低一级的中断上升为最高级</li>
</ul>
</li>
</ul>
</li>
<li>中断嵌套（中断处理过程中被更高优先级中断）方式<ul>
<li>普通全嵌套方式(默认<ul>
<li>中断被处理时，只有更高优先级中断可打断</li>
</ul>
</li>
<li>特殊全嵌套方式<ul>
<li>允许同级或更高优先级打断</li>
<li>仅用于多个<strong>8259A</strong>级连时的主<strong>8259A</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="中断结束处理方式"><a href="#中断结束处理方式" class="headerlink" title="中断结束处理方式"></a>中断结束处理方式</h3><ul>
<li><strong>IRi</strong>中断被服务时，<strong>ISR</strong>中的相应位 <strong>ISRi</strong>&#x3D;1，结束后必须清零该位</li>
<li>通过向8259A发出中断结束命令 (EOI命令)使<strong>ISRi</strong>&#x3D;0（中断结束处理</li>
<li>三种<strong>EOI</strong>命令<ul>
<li>自动<strong>EOI</strong>(<strong>AEOI</strong>)<ul>
<li>第<strong>2</strong>个<strong>INTA#<strong>结束时，由</strong>8259A</strong>使 <strong>ISRi</strong>自动复位</li>
<li>不用于中断嵌套方式（不保留当前正在服务的中断的状态</li>
</ul>
</li>
<li>普通中断结束方式<strong>EOI</strong>(<strong>NSEOI</strong>)<ul>
<li>由<strong>CPU</strong>发出正常<strong>EOI</strong>命令</li>
<li>使<strong>ISRi&#x3D;1</strong>的位中优先级最高的那一位复位</li>
</ul>
</li>
<li>特殊中断结束方式<strong>EOI</strong>(<strong>SEOI</strong>)<ul>
<li>由<strong>CPU</strong>发出一条<strong>SEOI</strong>命令，指出所要复位的<strong>ISR</strong>的位号</li>
<li>用于特殊屏蔽方式</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="屏蔽中断源的方式"><a href="#屏蔽中断源的方式" class="headerlink" title="屏蔽中断源的方式"></a>屏蔽中断源的方式</h3><ul>
<li><p>普通屏蔽方式</p>
<p><strong>IMR</strong>屏蔽字决定禁止某位<strong>IRi</strong>所对应的中断:<strong>IMi&#x3D;1</strong> 禁止</p>
</li>
<li><p>特殊屏蔽方式</p>
<ul>
<li>假定正在处理<strong>IR6</strong>，先进入特殊屏蔽方式， 然后设置<strong>IM6&#x3D;1</strong></li>
<li>这时除<strong>IR6</strong>外的所有中断请求均能得到响应</li>
<li>只能用特殊中断结束命令结束中断</li>
</ul>
</li>
</ul>
<h3 id="中断触发方式"><a href="#中断触发方式" class="headerlink" title="中断触发方式"></a>中断触发方式</h3><ul>
<li><p>边沿触发</p>
<p><strong>IRi</strong>上升沿表示有中断请求，触发后可以一直保持高电平</p>
</li>
<li><p>电平触发</p>
<p>在第<strong>1</strong>个<strong>INTA#<strong>结束前，</strong>IRi</strong>必须保持高电平，得到响应之后，输入端必须及时撤出高电平</p>
</li>
</ul>
<h3 id="级联工作方式"><a href="#级联工作方式" class="headerlink" title="级联工作方式"></a>级联工作方式</h3><ul>
<li><strong>n</strong>片<strong>8259A</strong>可支持<strong>7n+1</strong>个中断源</li>
<li>只能有一片<strong>8259A</strong>为主片 ➡️ 最多64个中断源</li>
<li><strong>CAS0-CAS2</strong> 链接主从片</li>
<li>主<strong>SP#&#x2F;EN#</strong> 接高，从接低</li>
<li>从<strong>INT</strong>接主<strong>IRi</strong></li>
</ul>
<h2 id="编程（只考初始化"><a href="#编程（只考初始化" class="headerlink" title="编程（只考初始化"></a>编程（只考初始化</h2><ul>
<li>初始化命令字<strong>ICW</strong>: <ul>
<li><strong>ICW1~ICW4</strong></li>
<li>整个系统工作过程中保持不变</li>
</ul>
</li>
<li>操作命令字<strong>OCW</strong>: <ul>
<li><strong>OCW1~OCW3</strong></li>
<li>改变初始化的8259A中断控制方式</li>
<li>屏蔽某些中断</li>
<li>读出8259A状态信息</li>
<li>可在<strong>初始化之后</strong>的任何时刻写入 8259A，并可多次设置</li>
</ul>
</li>
</ul>
<h4 id="内部寄存器的寻址"><a href="#内部寄存器的寻址" class="headerlink" title="内部寄存器的寻址"></a>内部寄存器的寻址</h4><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//image-20221121225902346.png" alt="image-20221121225902346" style="zoom:33%;" />

<ul>
<li>🌰：<ul>
<li>接口地址为<strong>20H</strong>和<strong>21H</strong> </li>
<li><strong>MOV DX</strong>，<strong>20H</strong> ;<strong>A0&#x3D;0</strong>，写<strong>ICW1</strong> 等</li>
<li><strong>MOV DX</strong>，<strong>21H</strong> ;<strong>A0&#x3D;1</strong>，写<strong>ICW2</strong>，<strong>OCW1</strong> 等</li>
<li>记得<strong>OUT</strong></li>
</ul>
</li>
</ul>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><ul>
<li><p>顺序</p>
<p>写 <strong>ICW1</strong> ➡️ 写 <strong>ICW2</strong> ➡️ （级连写<strong>ICW3</strong>）➡️ （写<strong>ICW4</strong>）</p>
</li>
<li><p><strong>ICW1（初始化字: 触发方式、级连控制、ICW4控制）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3(触发方式)</th>
<th>D2</th>
<th>D1(级连控制)</th>
<th>D0(<strong>ICW4</strong>控制)</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>1</td>
<td>LTIM(<strong>1</strong> 高电平触发)</td>
<td>X</td>
<td>SNGL(<strong>1</strong> 单片)</td>
<td>IC4(<strong>1</strong> 要写<strong>ICW4</strong>)</td>
</tr>
</tbody></table>
<ul>
<li>写<strong>ICW1</strong>意味着重新初始化<strong>8259A</strong></li>
<li>写入<strong>ICW1</strong>后，<strong>8259A</strong>状态:<ul>
<li><strong>ISR</strong>和<strong>IMR</strong>全0</li>
<li>中断屏蔽方式：一般屏蔽方式</li>
<li>中断结束方式：非自动</li>
<li>状态读出逻辑预置为读<strong>IRR</strong></li>
</ul>
</li>
<li>记：<ul>
<li>上升沿触发+单片+不写ICW4  <strong>ICW1&#x3D;12H</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ICW2（中断向量码）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>T7</td>
<td>T6</td>
<td>T5</td>
<td>T4</td>
<td>T3</td>
<td>X</td>
<td>X</td>
<td>X</td>
</tr>
</tbody></table>
<ul>
<li><strong>T7~T3</strong>: 中断向量码的高<strong>5</strong>位</li>
<li><strong>T2~T0</strong>: 中断源的序号,自动填入</li>
<li><strong>例</strong> 若<strong>ICW2</strong>命令字为<strong>48H</strong>，则<strong>IR0</strong>的中断向量码为 <strong>48H</strong>，<strong>IR7</strong>的中断向量码为<strong>4FH</strong></li>
<li>记：<ul>
<li><strong>IR0</strong> 中断向量码 &#x3D; <strong>ICW2</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ICW3（级连控制字）</strong></p>
<ul>
<li><p>主片</p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>S7</td>
<td>S6</td>
<td>S5</td>
<td>S4</td>
<td>S3</td>
<td>S2</td>
<td>S1</td>
<td>S0</td>
</tr>
</tbody></table>
<ul>
<li><strong>Si&#x3D;1</strong> 对应<strong>IRi</strong>线上连接了从片</li>
</ul>
</li>
<li><p>从片</p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>ID2</td>
<td>ID1</td>
<td>ID0</td>
</tr>
</tbody></table>
<ul>
<li><strong>ID2</strong><del><strong>ID0</strong> 说明连接到主片的哪个<strong>IR</strong>引脚上；<strong>000～111</strong>分别对应**IR0</del>IR7**</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>ICW4（中断结束方式字）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4(SFNM)</th>
<th>D3(BUF)</th>
<th>D2(M&#x2F;S)</th>
<th>D1(AEOI)</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td><strong>1</strong> 特殊全嵌套方式<br /><strong>0</strong> 一般全嵌套方式</td>
<td></td>
<td></td>
<td><strong>1</strong> 自动<strong>EOI</strong>方式<br /><strong>0</strong> 非自动<strong>EOI</strong>方式</td>
<td>1</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">BUF</th>
<th align="center">M&#x2F;S</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">缓冲方式**&#x2F;<strong>主</strong>PIC**</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">缓冲方式**&#x2F;<strong>从</strong>PIC**</td>
</tr>
<tr>
<td align="center">0</td>
<td align="center">X</td>
<td align="center">非缓冲方式**&#x2F;**正常</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="操作命令字"><a href="#操作命令字" class="headerlink" title="操作命令字"></a>操作命令字</h4><ul>
<li><p>写入顺序任意</p>
</li>
<li><p><strong>OCW1</strong>必须写入奇地址端口**(A0&#x3D;1)**</p>
</li>
<li><p><strong>OCW2、OCW3</strong>必须写入偶地址端口**(A0&#x3D;0)**</p>
</li>
<li><p><strong>OCW1（中断屏蔽字）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>M7</td>
<td>M6</td>
<td>M5</td>
<td>M4</td>
<td>M3</td>
<td>M2</td>
<td>M1</td>
<td>M0</td>
</tr>
</tbody></table>
<ul>
<li><strong>Mi&#x3D;1</strong> 中断请求线<strong>IRi</strong>被屏蔽</li>
<li>写入<strong>IMR</strong>寄存器</li>
<li>A0&#x3D;1时读OCW1可读出IMR</li>
</ul>
</li>
<li><p><strong>OCW2（中断结束和优先级循环）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7(R)</th>
<th>D6(SL)</th>
<th>D5(EOI)</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>&#x3D;1 优先级自动循环</td>
<td>&#x3D; 1 <strong>SEOI</strong></td>
<td>&#x3D; 0 AEOI</td>
<td>0</td>
<td>0</td>
<td>L2</td>
<td>L1</td>
<td>L0</td>
</tr>
</tbody></table>
<img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//image-20221121233826894.png" alt="image-20221121233826894" style="zoom:25%;" />
</li>
<li><p><strong>OCW3（屏蔽方式和读出控制字）</strong></p>
<table>
<thead>
<tr>
<th>A0</th>
<th>D7</th>
<th>D6(ESMM)</th>
<th>D5(SMM)</th>
<th>D4(RIS)</th>
<th>D3</th>
<th>D2</th>
<th>D1(P)</th>
<th>D0(RR)</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>&#x3D; 1 <br />允许特殊屏蔽方式</td>
<td>&#x3D; 1<br />特殊屏蔽方式置位</td>
<td>ISR&#x2F;IRR选择<br />(&#x3D;1读ISR)</td>
<td>0</td>
<td>1</td>
<td>&#x3D;1 查询方式</td>
<td>&#x3D; 1允许读寄存器</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="PC机中断程序设计"><a href="#PC机中断程序设计" class="headerlink" title="PC机中断程序设计"></a><strong>PC</strong>机中断程序设计</h4><ul>
<li>主程序<ul>
<li>保存原中断向量</li>
<li>设置自己的中断向量</li>
<li>初始化堆栈指针</li>
<li>设置<strong>8259A</strong>的中断屏蔽字</li>
<li><strong>STI</strong></li>
</ul>
</li>
<li>中断服务程序<ul>
<li>保存所用到的寄存器内容</li>
<li>中断服务程序主体</li>
<li>恢复进入时保存的寄存器内容</li>
<li>发<strong>EOI</strong>命令</li>
<li><strong>STI</strong></li>
<li><strong>IRET</strong></li>
</ul>
</li>
</ul>
<h1 id="8255A-并行I-x2F-O接口芯片"><a href="#8255A-并行I-x2F-O接口芯片" class="headerlink" title="8255A 并行I&#x2F;O接口芯片"></a>8255A 并行I&#x2F;O接口芯片</h1><ul>
<li><p><strong>3</strong>个独立的<strong>8</strong>位并行I&#x2F;O</p>
<ul>
<li>端口<strong>A</strong> 常作数据端口，三种工作方式，A组</li>
<li>端口<strong>B</strong> 常作数据端口，两种工作方式，B组</li>
<li>端口<strong>C</strong> 可作数据、状态和控制端口，分两个<strong>4</strong>位，每位可独立操作（A组控制高4位、B组控低4位<ul>
<li>可以按位操作，当其工作于 方式<strong>0</strong>下且作为输出口时，作为输出的位需要设置初始状态(<strong>1or0</strong>)</li>
</ul>
</li>
</ul>
</li>
<li><p>分外设接口、内部逻辑、CPU接口三部分</p>
</li>
<li><p>内部寻址</p>
<table>
<thead>
<tr>
<th>端口A</th>
<th>端口B</th>
<th>端口C</th>
<th>控制寄存器</th>
</tr>
</thead>
<tbody><tr>
<td>00(A1A0)</td>
<td>01</td>
<td>10</td>
<td>11</td>
</tr>
</tbody></table>
</li>
<li><p>控制字</p>
<ul>
<li><p>方式选择控制字: 确定通道的工作方式，给出标识位 </p>
<table>
<thead>
<tr>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>D6~D3控制A组<ul>
<li>（D6D5）选择方式0～2</li>
<li>D4 &#x3D; 1 A组输入；D3 &#x3D; 1 C端口(上)输入</li>
</ul>
</li>
<li>D2～D0控制B组<ul>
<li>D2 选择方式0～1</li>
<li>D1 &#x3D; 1 B组输入</li>
<li>D0 &#x3D; 1 C端口(下)输入</li>
</ul>
</li>
</ul>
</li>
<li><p>通道<strong>C</strong>置位**&#x2F;<strong>复位控制字: 控制</strong>C**口的输出开关量</p>
<table>
<thead>
<tr>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>(D3D2D1)为C端口位选择，(000) ➡️ 0，(111) ➡️ 7</li>
<li>D0 &#x3D; 1 ➡️ 置位</li>
</ul>
</li>
<li><p>共用一根地址线，使用<strong>D7</strong>位判断控制字，<strong>D7</strong>&#x3D;<strong>1</strong>表示为方式选择控制字</p>
</li>
</ul>
</li>
</ul>
<h3 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h3><h4 id="方式0-基本输入输出方式"><a href="#方式0-基本输入输出方式" class="headerlink" title="方式0:基本输入输出方式"></a>方式<strong>0</strong>:基本输入输出方式</h4><ul>
<li><p>适用于无条件传送和查询方式的接口电路</p>
<ul>
<li>查询输入输出方式: 把<strong>A</strong>、<strong>B</strong>口作为<strong>8</strong>位数据的输入&#x2F;输出口，<strong>C</strong>口的高**&#x2F;<strong>低</strong>4<strong>位分别定义为</strong>A<strong>、</strong>B**口的控制位和状态位</li>
</ul>
</li>
<li><p><strong>A</strong>口、<strong>C</strong>口的高<strong>4</strong>位、<strong>B</strong>口以及<strong>C</strong>口的低<strong>4</strong>位可分别定义为输入或输出，互相独立</p>
</li>
<li><p>输出的口有锁存能力，输入的口则无</p>
</li>
<li><p><strong>C</strong>口有按位置位&#x2F;复位能力</p>
</li>
</ul>
<h4 id="方式1-选通输入输出方式"><a href="#方式1-选通输入输出方式" class="headerlink" title="方式1:选通输入输出方式"></a>方式<strong>1</strong>:选通输入输出方式</h4><ul>
<li>适用于查询和中断方式的接口电路</li>
<li>一组选通控制信号控制<strong>A</strong>端口和<strong>B</strong>端口的数据输入输出，<strong>C</strong>位固定用作<strong>A</strong>、<strong>B</strong>口的选通控制信号<ul>
<li>A：<strong>PC3</strong>、<strong>PC6</strong>、<strong>PC7</strong>控制，B：<strong>PC2</strong>~<strong>PC0</strong>控制；指示两组数据口的状态及选通信号；</li>
<li><strong>PC4</strong>和<strong>PC5</strong>，用位控方式传送做I&#x2F;O</li>
<li>输入<ul>
<li><strong>STB#——</strong>选通信号，将外设数据送入<strong>8255</strong>的输入锁存器</li>
<li><strong>IBF——</strong>输入锁存器满。通知外设不能送下一个数据。 由<strong>STB</strong>的前沿产生。<strong>CPU</strong>用<strong>IN</strong>指令取走数据后， 信号被清除</li>
<li><strong>INTR——</strong>中断请求。<strong>STB#<strong>的后沿产生，用于中断 <strong>CPU</strong>，让</strong>CPU</strong>读走输入锁存器中的数据</li>
<li><strong>INTE——</strong>中断允许位，是否允许发出<strong>INTR</strong>请求。<strong>INTE &#x3D;1</strong>和<strong>IBF</strong>为高电平时，允许发出<strong>INTR</strong>请求</li>
</ul>
</li>
<li>输出<ul>
<li><strong>OBF#——</strong>通知外设取走数据</li>
<li><strong>ACK#——</strong>外设响应信号，表示已从数据端 口取走数据，使<strong>OBF</strong>变高</li>
<li><strong>INTR——ACK#<strong>上升沿产生，通知</strong>CPU</strong>输 出下一个数据(通常接到<strong>8259</strong>)。</li>
<li><strong>INTE——</strong>中断允许位，<strong>INTE&#x3D;1</strong>和<strong>OBF#<strong>为 高电平时，允许产生</strong>INTR</strong>信号。</li>
</ul>
</li>
</ul>
</li>
<li>数据端口均可设置为输入**&#x2F;**输出方式，均可锁存</li>
<li>中断控制<ul>
<li>中断允许触发器<strong>INTE</strong>控制，置位允许中断，复位禁止中断</li>
<li>选通输入<ul>
<li>端口<strong>A</strong>的<strong>INTEA</strong>对应<strong>PC4</strong> </li>
<li>端口<strong>B</strong>的<strong>INTEB</strong>对应<strong>PC2</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="方式2-双向选通传送方式"><a href="#方式2-双向选通传送方式" class="headerlink" title="方式2:双向选通传送方式"></a>方式<strong>2</strong>:双向选通传送方式</h4><ul>
<li>用于 双向传送数据的外设和 查询和中断方式的接口电路</li>
<li>外设通过端口<strong>A</strong>即可向<strong>CPU</strong>发送数据，又能从<strong>CPU</strong>接收数据</li>
<li>只适用于端口<strong>A</strong>，端口<strong>B</strong>仍按方式<strong>0</strong>或方式<strong>1</strong> 工作</li>
<li>端口<strong>C</strong>的<strong>PC7</strong><del><strong>PC3</strong>位作为 端口<strong>A</strong>的控制**&#x2F;<strong>状态信号端口，</strong>PC2**</del><strong>PC0</strong>用于<strong>B</strong>组</li>
<li>端口<strong>A</strong>的输入**&#x2F;<strong>输出均有锁存功能；端口</strong>A**既可工作于查询方式，又可工作于中断方式</li>
</ul>
<h1 id="8253可编程计数器-x2F-定时器"><a href="#8253可编程计数器-x2F-定时器" class="headerlink" title="8253可编程计数器&#x2F;定时器"></a><strong>8253</strong>可编程计数器&#x2F;定时器</h1><h3 id="内部结构和工作原理"><a href="#内部结构和工作原理" class="headerlink" title="内部结构和工作原理"></a>内部结构和工作原理</h3><ul>
<li><p>计数器：设置好计数初值后，对外部触发脉冲响应减<strong>1</strong>计数，减为<strong>0</strong>时，输出结束信号</p>
</li>
<li><p>定时器：设置好定时常数后，对外部时钟信号响应减<strong>1</strong>计数，按定时常数不断产生时钟周期整数倍的定时间隔</p>
</li>
<li><p>内部总线连接 三个计数器、一个控制字寄存器、一个数据总线寄存器、一个I&#x2F;O读写</p>
</li>
</ul>
<h3 id="寄存器选择方式"><a href="#寄存器选择方式" class="headerlink" title="寄存器选择方式"></a>寄存器选择方式</h3><table>
<thead>
<tr>
<th>!CS</th>
<th>!RD</th>
<th>!WR</th>
<th>A1</th>
<th>A0</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0(读)</td>
<td>0(写)</td>
<td>选择寄存器</td>
<td>（A1A0） 11时设置控制字</td>
</tr>
</tbody></table>
<h3 id="外部引线"><a href="#外部引线" class="headerlink" title="外部引线"></a>外部引线</h3><ul>
<li>连接系统端<ul>
<li>D7~D0</li>
<li>片选</li>
<li>读写控制（两个</li>
<li>A1、A0</li>
</ul>
</li>
<li>计数通道<ul>
<li><strong>CLKn</strong> 时钟脉冲输入，计数器的计时基准</li>
<li><strong>GATEn</strong> 门控信号输入，控制计数器的启停</li>
<li><strong>OUTn</strong> 计数器输出信号，不同工作方式下产生不同波形(方波、电平或脉冲)</li>
</ul>
</li>
</ul>
<h3 id="内部计数器"><a href="#内部计数器" class="headerlink" title="内部计数器"></a>内部计数器</h3><p><strong>3</strong>个计数器相互独立，各自按不同的方式工 作，控制寄存器中的控制字决定其工作方式</p>
<p>每个计数器内部结构相同</p>
<ul>
<li><strong>1</strong>个<strong>8</strong>位控制寄存器（只写</li>
<li><strong>1</strong>个<strong>16</strong>位的计数初值寄存器</li>
<li><strong>1</strong>个<strong>16</strong>位计数寄存器（减法计数器，计数执行部件</li>
<li><strong>1</strong>个输出锁存器</li>
</ul>
<h3 id="控制字"><a href="#控制字" class="headerlink" title="控制字"></a>控制字</h3><p>8253必须先初始化才能正常工作，每个计数器都必须初始化一次</p>
<p>初始化<strong>8253</strong>时，<strong>CPU</strong>要向<strong>8253</strong>的控制字寄存器写入一个控制字规定<strong>8253</strong>的工作方式</p>
<table>
<thead>
<tr>
<th>D7</th>
<th>D6</th>
<th>D5</th>
<th>D4</th>
<th>D3</th>
<th>D2</th>
<th>D1</th>
<th>D0</th>
</tr>
</thead>
<tbody><tr>
<td>(D7D6)(00~10)</td>
<td>计数器选择</td>
<td>(D5D4)(00~11)</td>
<td>读写控制</td>
<td>(D3D2D1)</td>
<td>(000~101)</td>
<td>工作方式选择</td>
<td>0(B计数) 1(D计数)</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">D5D4</th>
<th align="center">func</th>
</tr>
</thead>
<tbody><tr>
<td align="center">00</td>
<td align="center">计数器锁存(供<strong>CPU</strong>读)</td>
</tr>
<tr>
<td align="center">01</td>
<td align="center">只读**&#x2F;**写计数器低字节</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">只读**&#x2F;**写计数器高字节</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">读**&#x2F;<strong>写计数器</strong>16**位数<br />先低字节，后高字节</td>
</tr>
</tbody></table>
<h3 id="定时-x2F-计数工作过程"><a href="#定时-x2F-计数工作过程" class="headerlink" title="定时**&#x2F;**计数工作过程"></a>定时**&#x2F;**计数工作过程</h3><ol>
<li>设置<strong>8253</strong>的工作方式</li>
<li>设置计数初值到初值寄存器<ul>
<li><strong>初值</strong> &#x3D; 产生信号周期*<strong>8253</strong>时钟频率</li>
</ul>
</li>
<li>第一个<strong>CLK</strong>信号使初值寄存器的内容置入 计数寄存器，以后每来一个<strong>CLK</strong>信号，计数寄存器减<strong>1</strong></li>
<li>减到<strong>0</strong>时，<strong>OUT</strong>端输出一特殊波形的信号</li>
</ol>
<p>计数过程中还受到<strong>GATE</strong>信号的控制</p>
<h3 id="计数启动方式"><a href="#计数启动方式" class="headerlink" title="计数启动方式"></a>计数启动方式</h3><ul>
<li>程序指令启动（软件启动 <ul>
<li><strong>GATE</strong>端保持为高电平</li>
<li>写入计数初值后的第<strong>2</strong>个<strong>CLK</strong>脉冲的下降沿开始计数</li>
</ul>
</li>
<li>外部电路信号启动（硬件启动<ul>
<li><strong>GATE</strong>端有一个上升沿</li>
<li>对应<strong>CLK</strong>脉冲的下降沿开始计数</li>
<li>计数过程中若<strong>GATE</strong>出现上升沿，则重新装入原始计数值，重新开始计数</li>
</ul>
</li>
</ul>
<h3 id="计数过程中读计数值"><a href="#计数过程中读计数值" class="headerlink" title="计数过程中读计数值"></a>计数过程中读计数值</h3><ul>
<li>读取当前计数值（计数过程中）: <ul>
<li>先<strong>向控制寄存器写锁存命令</strong>(即<strong>D5D4&#x3D;00</strong>)，把当前计数值锁存到输出锁存器</li>
<li>再读相应端口数据</li>
</ul>
</li>
<li>停止计数器再读<ul>
<li>用<strong>GATE</strong>信号使计数器停止</li>
<li>规定<strong>RL1</strong>和 <strong>RL0</strong>的读写格式后读出</li>
</ul>
</li>
<li>读取装入的计数值: <ul>
<li>直接读取相应的端口</li>
<li>分两次读出: 先低字节，后高字节</li>
</ul>
</li>
</ul>
<h3 id="8253工作方式"><a href="#8253工作方式" class="headerlink" title="8253工作方式"></a><strong>8253</strong>工作方式</h3><p><strong>Tip：</strong></p>
<ol>
<li><strong>GATE</strong>出现上升沿时重新装填计数初值</li>
</ol>
<ul>
<li><p>方式 <strong>0</strong>（软启动）: <strong>计数结束产生中断</strong></p>
<ul>
<li>向计数器写完计数值时开始计数，<strong>OUT</strong>变为<strong>0</strong></li>
<li>计数到<strong>0</strong>时<strong>OUT</strong>输出为<strong>1</strong>，只计数一次</li>
<li><strong>GATE</strong>为低电平时停止计数</li>
<li>在计数时，若重新写入新的计数值，则按新的值重新工作</li>
</ul>
</li>
<li><p>方式 <strong>1</strong> （硬启动）: <strong>可重复触发的单稳态触发器</strong>（方式<strong>0</strong>的<strong>GATE</strong>受控循环</p>
<ul>
<li>设置方式后，<strong>OUT</strong>即变为高电平</li>
<li>写入计数值后，当<strong>GATE</strong>的上升沿时开始计数，<strong>OUT</strong>变为低；计数到<strong>0</strong>后， <strong>OUT</strong>变高</li>
<li>若计数中改变计数值，则要下个硬启动才会以新数计数</li>
</ul>
</li>
<li><p>方式<strong>2</strong>（软、硬启动）: <strong>分频器</strong>（方式<strong>1</strong>的自动版，可产生周期负脉冲</p>
<ul>
<li>为<strong>自动装入计数常</strong>数的计数器，计数期间<strong>OUT</strong>为<strong>1</strong>， 计数到<strong>1</strong>后输出<strong>1个周期(CLK)的0</strong>，并重新装入计数值计数</li>
<li>若计数中改变计数值，则要下个周期才会以新数计数（自然的，以周期自动装入常数</li>
</ul>
</li>
<li><p>方式 <strong>3</strong>（软、硬启动） : <strong>可编程方波发生器</strong>（更改了方式<strong>2</strong>的<strong>OUT</strong>占空比</p>
<ul>
<li><strong>OUT</strong>输出是一个占空比为<strong>1</strong>:<strong>1</strong>的方波 </li>
<li>若计数为奇数，则前面的<strong>1</strong>比后面的<strong>0</strong>多<strong>1</strong>个脉冲</li>
</ul>
</li>
<li><p>方式 <strong>4</strong> : <strong>软件触发的选通信号发生器</strong></p>
<ul>
<li>写入计数值后输出为高，开始计数（OUT）</li>
<li>计数结束时，输出<strong>1</strong>个脉冲低电平，再变高</li>
<li>若计数中改变计数值，则要结束后才会以新数计数</li>
</ul>
</li>
<li><p>方式 <strong>5</strong> : <strong>硬件触发的选通信号发生器</strong></p>
<ul>
<li><p>写入计数值后由<strong>GATE</strong>上升沿启动计数</p>
</li>
<li><p>其余与方式<strong>4</strong>相同</p>
</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:lijialin_3737@icloud.com">A.S.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://wonderland.plus/posts/7427/">http://wonderland.plus/posts/7427/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://wonderland.plus" target="_blank">Wonderland</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Code/">Code</a></div><div class="post_share"><div class="social-share" data-image="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//Wechat.jpg" target="_blank"><img class="post-qr-code-img" src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//Wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//Alipay.jpg" target="_blank"><img class="post-qr-code-img" src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//Alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/29962/"><img class="next-cover" src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Shell随手记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/50883/" title="Coding Anywhere"><img class="cover" src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//coding.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-04</div><div class="title">Coding Anywhere</div></div></a></div><div><a href="/posts/29962/" title="Shell随手记"><img class="cover" src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-30</div><div class="title">Shell随手记</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/face.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">A.S.</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lijialin001"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Lijialin001" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lijialin_3737@icloud.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to Wonderland</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#8086%E5%AF%84%E5%AD%98%E5%99%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">8086寄存器结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8%E7%BB%84"><span class="toc-number">1.1.</span> <span class="toc-text">通用寄存器组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">1.2.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">汇编指令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%BB%98%E8%AE%A4"><span class="toc-number">2.1.</span> <span class="toc-text">一些默认</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">寻址方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8086%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.3.</span> <span class="toc-text">8086指令系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-Transfer"><span class="toc-number">2.3.1.</span> <span class="toc-text">Data Transfer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arithmetic"><span class="toc-number">2.3.2.</span> <span class="toc-text">Arithmetic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Logic-and-Shift"><span class="toc-number">2.3.3.</span> <span class="toc-text">Logic and Shift</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String-Manipulation"><span class="toc-number">2.3.4.</span> <span class="toc-text">String Manipulation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Control-Jump"><span class="toc-number">2.3.5.</span> <span class="toc-text">Control Jump</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Processor-Control"><span class="toc-number">2.3.6.</span> <span class="toc-text">Processor Control</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interrupt"><span class="toc-number">2.3.7.</span> <span class="toc-text">Interrupt</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MASM%E5%AE%8F%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83"><span class="toc-number">3.</span> <span class="toc-text">MASM宏汇编语言规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">3.0.1.</span> <span class="toc-text">分段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5%E6%9E%84%E6%88%90"><span class="toc-number">3.0.2.</span> <span class="toc-text">语句构成</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">伪指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">数据定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%A6%E5%8F%B7%E5%AE%9A%E4%B9%89"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">符号定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AE%B5%E5%AE%9A%E4%B9%89"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">段定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AE%B5%E5%AF%BB%E5%9D%80ASSUME"><span class="toc-number">4.0.0.4.</span> <span class="toc-text">段寻址ASSUME</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B%E5%AE%9A%E4%B9%89-PROC-x2F-ENDP"><span class="toc-number">4.0.0.5.</span> <span class="toc-text">过程定义 PROC&#x2F;ENDP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">4.0.0.6.</span> <span class="toc-text">程序计数器 $</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%BD%8D%E4%BC%AA%E6%8C%87%E4%BB%A4-ORG"><span class="toc-number">4.0.0.7.</span> <span class="toc-text">定位伪指令 ORG</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">4.0.0.8.</span> <span class="toc-text">结构伪指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E4%BC%AA%E6%8C%87%E4%BB%A4"><span class="toc-number">4.0.0.9.</span> <span class="toc-text">记录伪指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8F%E7%9B%B8%E5%85%B3"><span class="toc-number">4.0.0.10.</span> <span class="toc-text">宏相关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">4.0.0.11.</span> <span class="toc-text">系统调用功能</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">主存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8A%E5%AF%BC%E4%BD%93%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">5.1.</span> <span class="toc-text">半导体存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">5.1.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">5.1.2.</span> <span class="toc-text">性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">5.1.3.</span> <span class="toc-text">组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">5.1.4.</span> <span class="toc-text">高速缓存工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%99%A8%E5%AF%BB%E5%9D%80%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.5.</span> <span class="toc-text">存储器寻址方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#I-x2F-O%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.</span> <span class="toc-text">I&#x2F;O接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#I-x2F-O%E7%BB%84%E6%88%90"><span class="toc-number">6.1.</span> <span class="toc-text">I&#x2F;O组成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%90%91CPU"><span class="toc-number">6.1.0.1.</span> <span class="toc-text">接向CPU</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%90%91%E5%A4%96%E8%AE%BE"><span class="toc-number">6.1.0.2.</span> <span class="toc-text">接向外设</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#I-x2F-O%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">6.2.</span> <span class="toc-text">I&#x2F;O控制方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.2.0.1.</span> <span class="toc-text">程序控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DMA%E6%8E%A7%E5%88%B6"><span class="toc-number">6.2.0.2.</span> <span class="toc-text">DMA控制</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD"><span class="toc-number">7.</span> <span class="toc-text">中断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E5%B1%8F%E8%94%BD%E4%B8%AD%E6%96%AD%EF%BC%88IF-x3D-0%E6%97%B6%E5%B1%8F%E8%94%BD"><span class="toc-number">7.0.0.1.</span> <span class="toc-text">可屏蔽中断（IF&#x3D;0时屏蔽</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8259A%E8%8A%AF%E7%89%87"><span class="toc-number">8.</span> <span class="toc-text">8259A芯片</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8"><span class="toc-number">8.1.</span> <span class="toc-text">寄存器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%86%E6%9E%90%E5%99%A8PR"><span class="toc-number">8.2.</span> <span class="toc-text">优先级分析器PR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">8.3.</span> <span class="toc-text">工作过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F%EF%BC%885%E6%96%B9%E9%9D%A2%EF%BC%89"><span class="toc-number">8.4.</span> <span class="toc-text">工作方式（5方面）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E4%BC%98%E5%85%88%E6%96%B9%E5%BC%8F%E4%B8%8E%E4%B8%AD%E6%96%AD%E5%B5%8C%E5%A5%97"><span class="toc-number">8.4.1.</span> <span class="toc-text">中断优先方式与中断嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E7%BB%93%E6%9D%9F%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.2.</span> <span class="toc-text">中断结束处理方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E4%B8%AD%E6%96%AD%E6%BA%90%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.3.</span> <span class="toc-text">屏蔽中断源的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E8%A7%A6%E5%8F%91%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.4.</span> <span class="toc-text">中断触发方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.5.</span> <span class="toc-text">级联工作方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%EF%BC%88%E5%8F%AA%E8%80%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">8.5.</span> <span class="toc-text">编程（只考初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E5%AF%BB%E5%9D%80"><span class="toc-number">8.5.0.1.</span> <span class="toc-text">内部寄存器的寻址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">8.5.0.2.</span> <span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4%E5%AD%97"><span class="toc-number">8.5.0.3.</span> <span class="toc-text">操作命令字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PC%E6%9C%BA%E4%B8%AD%E6%96%AD%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.5.0.4.</span> <span class="toc-text">PC机中断程序设计</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8255A-%E5%B9%B6%E8%A1%8CI-x2F-O%E6%8E%A5%E5%8F%A3%E8%8A%AF%E7%89%87"><span class="toc-number">9.</span> <span class="toc-text">8255A 并行I&#x2F;O接口芯片</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">9.0.1.</span> <span class="toc-text">工作方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F0-%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">9.0.1.1.</span> <span class="toc-text">方式0:基本输入输出方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F1-%E9%80%89%E9%80%9A%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">9.0.1.2.</span> <span class="toc-text">方式1:选通输入输出方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F2-%E5%8F%8C%E5%90%91%E9%80%89%E9%80%9A%E4%BC%A0%E9%80%81%E6%96%B9%E5%BC%8F"><span class="toc-number">9.0.1.3.</span> <span class="toc-text">方式2:双向选通传送方式</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8253%E5%8F%AF%E7%BC%96%E7%A8%8B%E8%AE%A1%E6%95%B0%E5%99%A8-x2F-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">8253可编程计数器&#x2F;定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">10.0.1.</span> <span class="toc-text">内部结构和工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E9%80%89%E6%8B%A9%E6%96%B9%E5%BC%8F"><span class="toc-number">10.0.2.</span> <span class="toc-text">寄存器选择方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E5%BC%95%E7%BA%BF"><span class="toc-number">10.0.3.</span> <span class="toc-text">外部引线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E9%83%A8%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-number">10.0.4.</span> <span class="toc-text">内部计数器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%AD%97"><span class="toc-number">10.0.5.</span> <span class="toc-text">控制字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6-x2F-%E8%AE%A1%E6%95%B0%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">10.0.6.</span> <span class="toc-text">定时**&#x2F;**计数工作过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E6%95%B0%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">10.0.7.</span> <span class="toc-text">计数启动方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E6%95%B0%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%AF%BB%E8%AE%A1%E6%95%B0%E5%80%BC"><span class="toc-number">10.0.8.</span> <span class="toc-text">计数过程中读计数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8253%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">10.0.9.</span> <span class="toc-text">8253工作方式</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/7427/" title="微机原理总结"><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微机原理总结"/></a><div class="content"><a class="title" href="/posts/7427/" title="微机原理总结">微机原理总结</a><time datetime="2022-11-17T11:15:11.903Z" title="发表于 2022-11-17 19:15:11">2022-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29962/" title="Shell随手记"><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Shell随手记"/></a><div class="content"><a class="title" href="/posts/29962/" title="Shell随手记">Shell随手记</a><time datetime="2022-10-30T10:44:45.000Z" title="发表于 2022-10-30 18:44:45">2022-10-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/13657/" title="ESP32随手记"><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ESP32随手记"/></a><div class="content"><a class="title" href="/posts/13657/" title="ESP32随手记">ESP32随手记</a><time datetime="2022-10-21T10:09:12.000Z" title="发表于 2022-10-21 18:09:12">2022-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/42770/" title="CoreData随手记"><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//blockchaim_img2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CoreData随手记"/></a><div class="content"><a class="title" href="/posts/42770/" title="CoreData随手记">CoreData随手记</a><time datetime="2022-10-20T05:00:13.000Z" title="发表于 2022-10-20 13:00:13">2022-10-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/44436/" title="Blockchain随手记"><img src="https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com//blockchaim_img2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Blockchain随手记"/></a><div class="content"><a class="title" href="/posts/44436/" title="Blockchain随手记">Blockchain随手记</a><time datetime="2022-10-06T17:26:48.000Z" title="发表于 2022-10-07 01:26:48">2022-10-07</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://blogimgs-1310551706.cos.ap-beijing.myqcloud.com/wonderful.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 By A.S.</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome to wonderland by A.S.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '6ab8d7cdf1b68168847b',
      clientSecret: '0c5bd497aae6e6c8feb58d0bba03ded64a13ae7f',
      repo: 'Lijialin001.github.io',
      owner: 'Lijialin001',
      admin: ['Lijialin001'],
      id: '5601dadd07fabe076383109f60ba7719',
      updateCountCallback: commentCount
    },))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>